define("mod_scheduler/saveseen",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.save_status=_exports.init=_exports.SELECTORS=_exports.MOD=void 0;const SELECTORS={CHECKBOXES:"table#slotmanager form.studentselectform input.studentselect"};_exports.SELECTORS=SELECTORS;_exports.MOD={};const save_status=(cmid,appid,newseen,spinner)=>{const url=M.cfg.wwwroot+"/mod/scheduler/ajax.php",params="action=saveseen&id="+cmid+"&appointmentid="+appid+"&seen="+newseen+"&sesskey="+M.cfg.sesskey,xhr=new XMLHttpRequest;xhr.timeout=5e3,xhr.onloadstart=()=>{spinner.style.visibility="visible"},xhr.onload=()=>{if(!(xhr.status>=200&&xhr.status<300)){const msg={name:xhr.status+" "+xhr.statusText,message:xhr.responseText};spinner.style.visibility="hidden";throw spinner.parentNode.removeChild(spinner),new Error(JSON.stringify(msg))}setTimeout((()=>{spinner.style.visibility="hidden";spinner.parentNode.removeChild(spinner)}),250)},xhr.onerror=()=>{spinner.style.visibility="hidden";throw spinner.parentNode.removeChild(spinner),new Error("Network request failed")},xhr.open("POST",url,!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.send(params)};_exports.save_status=save_status;_exports.init=cmid=>{document.querySelectorAll(SELECTORS.CHECKBOXES).forEach((function(box){box.addEventListener("change",(function(){var div=document.createElement("div"),span=document.createElement("span");div.classList.add("spinner-border","spinner-border-sm"),span.classList.add("sr-only"),div.appendChild(span),box.closest("div").appendChild(div),save_status(cmid,box.value,box.checked,div)}))}))}}));

//# sourceMappingURL=saveseen.min.js.map